<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="id_recipick">
	<insert id="recipe_id" parameterType="recipeDTO">
		<selectKey keyProperty="recipe_id" resultType="int" order="BEFORE">
			select recipe_seq.nextval from dual
		</selectKey>
		insert into recipe(
						recipe_id,
						recipe_date,
						mainpic,
						maintext,
						viewer,
						uname,
						recipe_title
						)
					values(
						#{recipe_id},
						sysdate,
						#{mainpic},
						#{maintext},
						0,
						#{user},
						#{recipe_title}
						)
	</insert>
	
	<insert id="food" parameterType="hashmap">
		insert into food(
					food_id,
					food_name,
					food_value,
					recipe_id
					)
					values(
						food_id.nextval,
						#{food_name},
						#{food_value},
						#{recipe_id}
					)
					
	</insert>
	
	<insert id="hashtag" parameterType="hashmap">
		insert into hashtag(
						hash_id,
						hash_name,
						tag_type,
						recipe_id
					)
					values(
						hash_id.nextval,
						#{hash_name},
						'recipe',
						#{recipe_id}
					)
	</insert>
	
	<insert id="detailrecipe" parameterType="hashmap">
		insert into detailrecipe(
							detailrecipe_id,
							detail_pic,
							detail_text,
							make_order,
							recipe_id
						)
						values(
							detailrecipe_id.nextval,
							#{detail_pic},
							#{detail_text},
							#{make_order},
							#{recipe_id}
						)
						
	</insert>
	
	<insert>
		
	</insert>
	
	
	
	<select id="searchData" resultType="recipeDTO" parameterType="hashmap"> <!--   -->
		SELECT * FROM RECIPE
		WHERE recipe_title LIKE '%' || #{recipe_title} || '%'
	</select>
	
	
</mapper>